<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>WMS Luxury Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="wrapper">
      <aside class="sidebar">
        <div class="sidebar-logo">
          <i class="fas fa-layer-group"></i> WMS PRO
        </div>
        <nav>
          <a href="#" class="nav-item active"
            ><i class="fas fa-grid-2"></i> Dashboard</a
          >
          <a href="#" class="nav-item"
            ><i class="fas fa-boxes-stacked"></i> Sản phẩm (SKU)</a
          >
          <a href="#" class="nav-item"
            ><i class="fas fa-truck-ramp-box"></i> Kho hàng</a
          >
          <a href="#" class="nav-item"
            ><i class="fas fa-users-gear"></i> Phân quyền</a
          >
          <a href="#" class="nav-item" style="margin-top: 40px; color: #f87171"
            ><i class="fas fa-power-off"></i> Đăng xuất</a
          >
        </nav>
      </aside>

      <header class="top-header">
        <div style="font-weight: 800; font-size: 20px; color: var(--text-dark)">
          Tổng quan
        </div>
        <div style="display: flex; align-items: center; gap: 20px">
          <div style="text-align: right">
            <p
              style="font-weight: 800; color: var(--text-dark); font-size: 14px"
            >
              Nguyễn Văn Admin
            </p>
            <p style="font-size: 11px; color: var(--primary); font-weight: 800">
              ADMINISTRATOR
            </p>
          </div>
          <img
            src="https://ui-avatars.com/api/?name=Admin&background=4f46e5&color=fff"
            style="width: 44px; height: 44px; border-radius: 14px"
          />
        </div>
      </header>

      <main class="main-content">
        <div class="grid-stats">
          <div class="stat-card">
            <div
              class="stat-indicator"
              style="background: var(--primary)"
            ></div>
            <p class="stat-title">Tổng sản phẩm</p>
            <p class="stat-value">1,250</p>
          </div>
          <div class="stat-card">
            <div class="stat-indicator" style="background: #10b981"></div>
            <p class="stat-title">Nhập tháng này</p>
            <p class="stat-value">450</p>
          </div>
          <div class="stat-card">
            <div class="stat-indicator" style="background: #f43f5e"></div>
            <p class="stat-title">Xuất tháng này</p>
            <p class="stat-value">312</p>
          </div>
          <div class="stat-card">
            <div class="stat-indicator" style="background: #f59e0b"></div>
            <p class="stat-title">Tồn kho thấp</p>
            <p class="stat-value" style="color: #f59e0b">12</p>
          </div>
        </div>

        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">
              <h3>
                <i
                  class="fas fa-triangle-exclamation"
                  style="color: #f59e0b; margin-right: 8px"
                ></i>
                TỒN KHO THẤP
              </h3>
            </div>
            <table class="table-custom">
              <tbody>
                <?php foreach($low_stock as $ls): ?>
                <tr>
                  <td style="font-weight: 600; color: var(--text-dark)">
                    <?= $ls['name'] ?>
                    <br />
                    <small style="color: var(--text-light)"
                      ><?= $ls['sku'] ?></small
                    >
                  </td>
                  <td
                    style="color: #ef4444; font-weight: 800; text-align: right"
                  >
                    <?= $ls['quantity'] ?>
                    <?= $ls['unit'] ?>
                  </td>
                </tr>
                <?php endforeach; ?>
              </tbody>
            </table>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>
                <i
                  class="fas fa-clock-rotate-left"
                  style="color: var(--primary); margin-right: 8px"
                ></i>
                HOẠT ĐỘNG GẦN ĐÂY
              </h3>
              <button
                class="btn btn-primary"
                style="font-size: 12px; padding: 6px 12px"
                onclick="openAddModal()"
              >
                Thêm sản phẩm
              </button>
            </div>
            <table class="table-custom">
              <thead>
                <tr>
                  <th>Thời gian</th>
                  <th>Loại</th>
                  <th>Sản phẩm</th>
                  <th style="text-align: right">Số lượng</th>
                </tr>
              </thead>
              <tbody>
                <?php foreach($recent_activities as $ra): ?>
                <tr>
                  <td
                    style="
                      color: var(--text-light);
                      font-size: 12px;
                      font-weight: 600;
                    "
                  >
                    <?= date('H:i d/m', strtotime($ra['created_at'])) ?>
                  </td>
                  <td>
                    <span class="badge-status <?= strtolower($ra['type']) ?>"
                      ><?= $ra['type'] == 'IN' ? 'NHẬP' : 'XUẤT' ?></span
                    >
                  </td>
                  <td style="font-weight: 700; color: var(--text-dark)">
                    <?= $ra['product_name'] ?>
                  </td>
                  <td
                    style="text-align: right; font-weight: 800; color: <?= $ra['type'] == 'IN' ? '#10b981' : '#f43f5e' ?>;"
                  >
                    <?= $ra['type'] == 'IN' ? '+' : '-' ?><?= $ra['quantity'] ?>
                  </td>
                </tr>
                <?php endforeach; ?>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>

    <div class="modal-overlay" id="addModal">
      <div class="modal-box">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
          "
        >
          <h2
            style="font-weight: 800; color: var(--text-dark); font-size: 24px"
          >
            Thêm sản phẩm mới
          </h2>
          <i
            class="fas fa-times"
            style="cursor: pointer; font-size: 20px; color: var(--text-light)"
            onclick="closeModal()"
          ></i>
        </div>
        <form style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px">
          <div style="grid-column: span 2">
            <label
              style="
                display: block;
                font-weight: 700;
                margin-bottom: 8px;
                font-size: 14px;
              "
              >Tên sản phẩm *</label
            >
            <input
              type="text"
              placeholder="Nhập tên..."
              style="
                width: 100%;
                padding: 14px;
                border: 2px solid var(--border);
                border-radius: 12px;
                outline: none;
              "
            />
          </div>
          <div
            style="
              grid-column: span 2;
              display: flex;
              justify-content: flex-end;
              gap: 12px;
              margin-top: 16px;
            "
          >
            <button
              type="button"
              class="btn"
              style="background: #f1f5f9; color: var(--text-dark)"
              onclick="closeModal()"
            >
              Hủy bỏ
            </button>
            <button type="submit" class="btn btn-primary">Lưu sản phẩm</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      function openAddModal() {
        document.getElementById("addModal").classList.add("active");
      }
      function closeModal() {
        document.getElementById("addModal").classList.remove("active");
      }
    </script>
  </body>
</html>
